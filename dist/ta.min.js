/*!
 * ta.js 0.0.1
 * http://github.com/andidev/ta.js
 * Copyright (c) 2014 Anders Steiner; Licensed Apache-2.0
 */

!function(){var a=Object.prototype.toString,b=Array.isArray||function(b){return"[object Array]"===a.call(b)},c=function(a){if(!(this instanceof c))return new c(a);if(b(a))this.array=a;else{if(a instanceof c)return c(a.asArray());this.array=[]}return this};c.fn=c.prototype={asArray:function(){return this.array},max:function(){return Math.max.apply(Math,this.array)},min:function(){return Math.min.apply(Math,this.array)},sum:function(a,b){void 0===a&&void 0===b&&(a=0,b=this.array.length);for(var c=0,d=a;b>d;d++)c+=this.array[d];return c},plus:function(a){a instanceof c&&(a=a.asArray());for(var b=[],d=0;d<this.array.length;d++)b[d]=null!==this.array[d]&&null!==a[d]?this.array[d]+a[d]:null;return c(b)},minus:function(a){a instanceof c&&(a=a.asArray());for(var b=[],d=0;d<this.array.length;d++)b[d]=null!==this.array[d]&&null!==a[d]?this.array[d]-a[d]:null;return c(b)},a:function(a,b){void 0===a&&void 0===b&&(a=0,b=this.array.length);for(var c=0,d=a;b>d;d++)c+=this.array[d];return c/(b-a)}},c.fn.ma=function(a,b,d){void 0===b&&void 0===d&&(b=0,d=this.array.length);for(var e=[],f=b;d>f;f++)e[f-b]=a-1>f?null:this.sum(f-(a-1),f+1)/a;return c(e)},c.fn.ema=function(a,b,d){void 0===b&&void 0===d&&(b=0,d=this.array.length);for(var e=2/(a+1),f=[],g=b;d>g;g++)f[g-b]=a-1>g?null:g===a-1?this.ma(a,g,g+1).asArray()[0]:e*this.array[g]+(1-e)*f[g-b-1];return c(f)},c.fn.macd=function(a,b,c,d,e){void 0===a&&(a=26),void 0===b&&(b=12),void 0===c&&(c=9),void 0===d&&void 0===e&&(d=0,e=this.array.length);var f=this.ema(b,d,e).minus(this.ema(a,d,e)),g=f.ema(c,d,e),h=f.minus(g);return{macd:f,signal:g,histogram:h}},window.TA=c}();